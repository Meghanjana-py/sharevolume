<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Loading Entity Shares...</title><script src="https://cdn.tailwindcss.com"></script><style>:root { color-scheme: light dark; }</style></head><body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center p-4"><div class="bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 md:p-8 w-full max-w-2xl text-center"><h1 class="text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-6" id="share-entity-name">Loading Entity...</h1><div id="loading-spinner" class="text-center py-10"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 dark:border-gray-100 mx-auto"></div><p class="mt-4 text-gray-600 dark:text-gray-300">Fetching data...</p></div><div id="content" class="hidden"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"><div class="bg-green-50 dark:bg-green-900 p-4 rounded-lg shadow-sm"><h2 class="text-2xl font-semibold text-green-700 dark:text-green-200 mb-2">Max Shares Outstanding</h2><p class="text-4xl font-extrabold text-green-900 dark:text-green-100" id="share-max-value">N/A</p><p class="text-lg text-green-600 dark:text-green-300 mt-2">Fiscal Year: <span id="share-max-fy">N/A</span></p></div><div class="bg-red-50 dark:bg-red-900 p-4 rounded-lg shadow-sm"><h2 class="text-2xl font-semibold text-red-700 dark:text-red-200 mb-2">Min Shares Outstanding</h2><p class="text-4xl font-extrabold text-red-900 dark:text-red-100" id="share-min-value">N/A</p><p class="text-lg text-red-600 dark:text-red-300 mt-2">Fiscal Year: <span id="share-min-fy">N/A</span></p></div></div></div><div id="error-message" class="hidden text-red-600 dark:text-red-400 mt-6 text-center"><p>Error loading data. Please try again later or check the CIK.</p></div></div><script>document.addEventListener('DOMContentLoaded', () => { const defaultCik = '0000070858'; const proxyUrl = 'https://api.allorigins.win/raw?url='; const getCikFromUrl = () => { const params = new URLSearchParams(window.location.search); let cik = params.get('CIK'); if (cik && /^[0-9]{10}$/.test(cik)) { return cik; } return defaultCik; }; const fetchData = async (cik) => { document.getElementById('loading-spinner').classList.remove('hidden'); document.getElementById('content').classList.add('hidden'); document.getElementById('error-message').classList.add('hidden'); const secBaseUrl = "https://data.sec.gov/api/xbrl/companyconcept/"; const fullSecUrl = `${secBaseUrl}CIK${cik}/dei/EntityCommonStockSharesOutstanding.json`; const fetchUrl = `${proxyUrl}${encodeURIComponent(fullSecUrl)}`; try { const response = await fetch(fetchUrl, { headers: { 'User-Agent': 'EntitySharesApp/1.0 (contact@example.com)' } }); if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); } const data = await response.json(); if (!data.entityName || !data.units || !data.units.shares) { throw new Error('Invalid data structure received from SEC.'); } const entityName = data.entityName; let filteredShares = data.units.shares.filter(s => s.fy && parseInt(s.fy) > 2020 && typeof s.val === 'number' && !isNaN(s.val)); if (filteredShares.length === 0) { throw new Error('No relevant share data found for years after 2020.'); } let maxShare = null; let minShare = null; filteredShares.forEach(share => { if (maxShare === null || share.val > maxShare.val) { maxShare = share; } if (minShare === null || share.val < minShare.val) { minShare = share; } }); document.title = `${entityName} Shares Outstanding`; document.getElementById('share-entity-name').textContent = entityName; document.getElementById('share-max-value').textContent = maxShare ? maxShare.val.toLocaleString() : 'N/A'; document.getElementById('share-max-fy').textContent = maxShare ? maxShare.fy : 'N/A'; document.getElementById('share-min-value').textContent = minShare ? minShare.val.toLocaleString() : 'N/A'; document.getElementById('share-min-fy').textContent = minShare ? minShare.fy : 'N/A'; document.getElementById('content').classList.remove('hidden'); } catch (error) { console.error('Error fetching or processing data:', error); document.getElementById('error-message').classList.remove('hidden'); document.getElementById('share-entity-name').textContent = `Could not load data for CIK ${cik}`; document.title = `Error loading CIK ${cik}`; document.getElementById('share-max-value').textContent = 'N/A'; document.getElementById('share-max-fy').textContent = 'N/A'; document.getElementById('share-min-value').textContent = 'N/A'; document.getElementById('share-min-fy').textContent = 'N/A'; } finally { document.getElementById('loading-spinner').classList.add('hidden'); } }; const currentCik = getCikFromUrl(); fetchData(currentCik); });</script></body></html>